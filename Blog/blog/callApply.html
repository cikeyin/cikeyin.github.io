<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>call、apply、bind | 刺客的主页</title>
    <meta name="description" content="刺客的主页 技术博客">
    <link rel="icon" href="/Blog/favicon.ico">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.f1b0328c.css" as="style"><link rel="preload" href="/Blog/assets/js/app.53316db4.js" as="script"><link rel="preload" href="/Blog/assets/js/6.6b5a21a1.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.5166443d.js"><link rel="prefetch" href="/Blog/assets/js/11.30a3e37c.js"><link rel="prefetch" href="/Blog/assets/js/12.ce1e94ad.js"><link rel="prefetch" href="/Blog/assets/js/2.f322ea4b.js"><link rel="prefetch" href="/Blog/assets/js/3.01e0aa4f.js"><link rel="prefetch" href="/Blog/assets/js/4.1882d018.js"><link rel="prefetch" href="/Blog/assets/js/5.d7247d01.js"><link rel="prefetch" href="/Blog/assets/js/7.ba8ff3b7.js"><link rel="prefetch" href="/Blog/assets/js/8.d76e960c.js"><link rel="prefetch" href="/Blog/assets/js/9.d854a588.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.f1b0328c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><!----> <span class="site-name">刺客的主页</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">介绍</a></div><div class="nav-item"><a href="/Blog/blog/reg.html" class="nav-link">技术总结</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">介绍</a></div><div class="nav-item"><a href="/Blog/blog/reg.html" class="nav-link">技术总结</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Blog/blog/reg.html" class="sidebar-link">正则表达式</a></li><li><a href="/Blog/blog/markdown.html" class="sidebar-link">Markdown语法</a></li><li><a href="/Blog/blog/browserCache.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/Blog/blog/eventLoop.html" class="sidebar-link">JavaScript事件循环机制（Event Loop）</a></li><li><a href="/Blog/blog/promise.html" class="sidebar-link">Promise原理与实现</a></li><li><a href="/Blog/blog/algorithm.html" class="sidebar-link">前端算法</a></li><li><a href="/Blog/blog/callApply.html" class="active sidebar-link">call、apply、bind</a><ul class="sidebar-sub-headers"></ul></li></ul> </div> <div class="page"> <div class="content"><h3 id="call、apply、bind"><a href="#call、apply、bind" aria-hidden="true" class="header-anchor">#</a> call、apply、bind</h3> <h4 id="一、定义"><a href="#一、定义" aria-hidden="true" class="header-anchor">#</a> 一、定义</h4> <p>在 javascript 中，call 和 apply 都是为了改变某个函数运行时的上下文（context）而存在的，换句话说，就是为了改变函数体内部 this 的指向。</p> <h4 id="二、用法"><a href="#二、用法" aria-hidden="true" class="header-anchor">#</a> 二、用法</h4> <div class="language-js extra-class"><pre class="language-js"><code>func<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">)</span><span class="token punctuation">;</span>
func<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="三、场景"><a href="#三、场景" aria-hidden="true" class="header-anchor">#</a> 三、场景</h4> <h4 id="_1-数组之间追加"><a href="#_1-数组之间追加" aria-hidden="true" class="header-anchor">#</a> 1.数组之间追加</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> array2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>array1<span class="token punctuation">,</span>array2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//array1的值为[1,2,3,4,5] 试试array1.push(array2)</span>
</code></pre></div><h4 id="_2-获取数组中的最大值和最小值"><a href="#_2-获取数组中的最大值和最小值" aria-hidden="true" class="header-anchor">#</a> 2.获取数组中的最大值和最小值</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Math<span class="token punctuation">.</span>max<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span>array1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//**typeof Math==object;Math没有prototype </span>
Math<span class="token punctuation">.</span>max<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这样写不如直接写成Math.max(2,4,3,1,5)</span>
</code></pre></div><h4 id="_3-验证变量是是否为数组"><a href="#_3-验证变量是是否为数组" aria-hidden="true" class="header-anchor">#</a> 3.验证变量是是否为数组</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span>
<span class="token punctuation">}</span>
<span class="token comment">//**验证变量是否为数组的方法http://www.jb51.net/article/79939.htm</span>
</code></pre></div><h4 id="_4-类数组使用数组方法"><a href="#_4-类数组使用数组方法" aria-hidden="true" class="header-anchor">#</a> 4.类数组使用数组方法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> domNodes <span class="token operator">=</span> Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 类数组与数组的区别，类数组转成数组的方法。Javascript中存在一种名为伪数组的对象结构。</span>
<span class="token comment">// 比较特别的是 arguments 对象，还有像调用 getElementsByTagName , document.childNodes 之类的，</span>
<span class="token comment">// 它们返回NodeList对象都属于伪数组，不能应用 Array下的 push , pop 等方法。</span>
</code></pre></div><p>但是我们能通过 Array.prototype.slice.call 转换为真正的数组的带有 length 属性的对象，这样 domNodes 就可以应用 Array 下的所有方法了。</p> <h4 id="_5-定义一个-log-方法，让它可以代理-console-log-方法"><a href="#_5-定义一个-log-方法，让它可以代理-console-log-方法" aria-hidden="true" class="header-anchor">#</a> 5.定义一个 log 方法，让它可以代理 console.log 方法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>console<span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来的要求是给每一个 log 消息添加一个”(app)”的前辍</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    args<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">'(app)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>console<span class="token punctuation">,</span>args<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6-实现继承"><a href="#_6-实现继承" aria-hidden="true" class="header-anchor">#</a> 6.实现继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>      
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>       
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">showName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>     
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>       
    <span class="token punctuation">}</span>       
<span class="token punctuation">}</span>       
<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>   
    Animal<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>      
<span class="token punctuation">}</span>       
<span class="token keyword">var</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&quot;Black Cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
cat<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre></div><h4 id="四、bind"><a href="#四、bind" aria-hidden="true" class="header-anchor">#</a> 四、bind</h4> <p>bind() 方法与 apply 和 call 很相似，也是可以改变函数体内 this 的指向。
MDN的解释是：bind()方法会创建一个新函数，称为绑定函数，当调用这个绑定函数时，绑定函数会以创建它时传入 bind()方法的第一个参数作为 this，传入 bind() 方法的第二个以及以后的参数加上绑定函数运行时本身的参数按照顺序作为原函数的参数来调用原函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">:</span> <span class="token number">81</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    getX<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>getX<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//81</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>getX<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//81</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>getX<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//81</span>
</code></pre></div><p>三个输出的都是81，但是注意看使用 bind() 方法的，他后面多了对括号。
也就是说，区别是，当你希望改变上下文环境之后并非立即执行，而是回调执行的时候，使用 bind() 方法。而 apply/call 则会立即执行函数。</p> <h4 id="五、总结"><a href="#五、总结" aria-hidden="true" class="header-anchor">#</a> 五、总结</h4> <p>apply 、 call 、bind 三者都是用来改变函数的this对象的指向的；
apply 、 call 、bind 三者第一个参数都是this要指向的对象，也就是想指定的上下文；
apply 、 call 、bind 三者都可以利用后续参数传参；
bind 是返回对应函数，便于稍后调用；apply 、call 则是立即调用 。</p> <h4 id="六、参考"><a href="#六、参考" aria-hidden="true" class="header-anchor">#</a> 六、参考</h4> <blockquote><p>http://web.jobbole.com/83642/</p></blockquote></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Blog/blog/algorithm.html" class="prev">
          前端算法
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/Blog/assets/js/app.53316db4.js" defer></script><script src="/Blog/assets/js/6.6b5a21a1.js" defer></script>
  </body>
</html>
